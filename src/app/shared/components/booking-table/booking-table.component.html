<div [ngClass]="{'overlay': isPopupVisible}" (click)="togglePopup()"></div>

<ng-container *ngIf="unpaidUserBookings$ | async as unpaidUserBookings">

  <div class="header-container" *ngIf="unpaidUserBookings.length">

    <mat-checkbox color="primary" [checked]="isAllChecked"
      (click)="isAllBookingsSelected(unpaidUserBookings)">
    </mat-checkbox>

    <div class="header-content-container">
      <p class="number-container">No.</p>
      <p class="flight-number-container">Flight</p>
      <p class="way">Type trip</p>
      <p class="time-cintainer">Data & Time</p>
      <p class="passengers-container">Passengers</p>
      <p>Price</p>
    </div>

  </div>

  <p class="no-bookings-text"
    *ngIf="!unpaidUserBookings.length">
    No bookings to pay. Please add new trip
  </p>
  <div class="bookings-container">
    <app-booking-item *ngFor="let booking of unpaidUserBookings"
      [booking]="booking" class="bottom-line">
    </app-booking-item>
  </div>

  <div class="bottom-container bottom-line"
    [ngClass]="{'position-center': !unpaidUserBookings.length}">
      <button class="without-padding" (click)="navToMain()">
        <span class="add-btn-text">+ Add new trip</span>
      </button>
      <div class="total-container" *ngIf="unpaidUserBookings.length">
        <p class="total-title">Total</p>
        <p class="total-cost">{{summary(unpaidUserBookings) | currency: 'EUR'}}</p>
      </div>
  </div>

  <div class="apply-container" *ngIf="unpaidUserBookings.length">
    <form class="promo-container">
      <input type="text" class="promo" placeholder="Promo Code">
      <button class="promo-apply without-padding">APPLY</button>
    </form>

    <div class="selected-container">
      <p *ngIf="selectedCount; else noSelect" class="select-content">
        <span>{{selectedCount}}</span>
        <span>selected</span>
      </p>
      <ng-template #noSelect>
        <p class="select-content">No booking selected</p>
      </ng-template>
      <button class="primary-btn"
        (click)="payBookings()"
        [disabled]="!selectedCount">
        Payment
      </button>
    </div>
  </div>

</ng-container>

<mat-card class="popup" [ngClass]="{'visible': isPopupVisible}">
  <p class="approve-text">All bookings you have chosen have been paid</p>
  <button class="secondary-btn pisioned-right"
    (click)="togglePopup()">
    Close
  </button>
</mat-card>





